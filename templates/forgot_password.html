<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reset Password</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="form-container">
    <h2>Set a New Password</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form method="POST" autocomplete="off">
      <div class="pw-wrap">
        <input type="password" name="password" id="password" class="pixel-input" placeholder="New Password" required>
        <button type="button" id="toggle-password" class="show-password-btn" tabindex="-1">Show</button>
      </div>
      <button class="pixel-btn" type="submit">Reset Password</button>
    </form>
    <a href="{{ url_for('login') }}" class="return-link">Return to Login</a>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var pwInput = document.getElementById('password');
      var toggleBtn = document.getElementById('toggle-password');
      if (pwInput && toggleBtn) {
        toggleBtn.addEventListener('click', function() {
          const type = pwInput.type === 'password' ? 'text' : 'password';
          pwInput.type = type;
          toggleBtn.textContent = type === 'password' ? 'Show' : 'Hide';
        });
      }
    });
  </script>
</body>
</html>
